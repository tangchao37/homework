# homework
# homework
# Brainrent知识库问答Agent系统

## 1. Agent功能说明

**智能客服助手**  
本系统是一个基于LangChain框架的智能问答Agent，专为Brainrent产品设计。Agent能够：
- 理解用户关于产品功能、使用方法的自然语言提问
- 从知识库文档中检索精准答案
- 处理多轮对话上下文
- 执行基本数学计算
- 记录和分析对话质量

**背景说明**  
Brainrent是一个脑机接口租赁平台，用户需要快速获取产品技术细节和使用指导。传统客服响应慢，知识库检索效率低。本Agent通过AI技术提升客服效率，降低人力成本。

## 2. 系统实现细节

### 技术栈
- **核心框架**: LangChain 0.2.1
- **大模型**: NVIDIA Llama-3.3-70b (通过NVIDIA API)
- **向量数据库**: FAISS (本地部署)
- **文档处理**: PyPDF, TextLoader
- **对话分析**: Langfuse
- **部署环境**: Python 3.10, FastAPI

### Agent工具集
1. **知识库工具** (同学B开发)
   - 基于Brainrent产品文档(TXT)
   - 文本分块与语义检索
   - 中文问答支持

2. **PDF处理工具** (同学B开发)
   - 解析PDF技术文档
   - 多页内容关联分析
   - 支持英文技术文档

3. **计算器工具** (同学B开发)
   - 执行数学表达式计算
   - 错误处理机制
   - 支持复杂公式计算

4. **记忆模块** (同学A开发)
   - 对话历史缓冲
   - 多轮上下文保持
   - 自适应记忆窗口

## 3. 运行测试方法

### 环境配置
```bash
# 克隆仓库


# 创建虚拟环境
python -m venv venv
source venv/bin/activate  
venv\Scripts\activate   
# 安装依赖
pip install -r requirements.txt

## 合作聊天记录

**同学A** (10:15):  
我完成了Agent核心框架和记忆模块，现在Agent可以保持5轮对话历史。你能开始集成知识库工具吗？

**同学B** (10:20):  
知识库工具基本完成，但中文处理有问题。遇到两个问题：  
1. 文本分块导致语义断裂  
2. 检索结果不相关  
建议：调整分块大小和重叠参数？

**同学A** (10:25):  
同意。尝试chunk_size=800, overlap=150。另外我在主循环添加了Langfuse回调，可以记录工具使用情况。

**同学B** (10:30):  
参数调整有效！现在可以处理中文问答了。我添加了PDF工具和计算器工具，测试时发现PDF表格解析问题。

**同学A** (10:40):  
建议改用PyMuPDF库，它处理表格更好。另外，我们是否需要添加错误处理？当工具失败时Agent会崩溃。

**同学B** (11:00):  
已添加try-except块到每个工具函数。现在工具失败时会返回错误信息而不是崩溃。PDF解析问题解决了。

**同学A** (11:15):  
完美！我优化了记忆模块，现在能更好处理工具返回结果。最后需要添加部署文档到README。

**同学B** (11:30):  
README初稿完成，包含运行方法和示例。你检查技术描述部分，我补充合作反思内容。

**同学A** (11:45):  
README技术部分准确，我添加了架构图描述。项目完成，准备提交！
